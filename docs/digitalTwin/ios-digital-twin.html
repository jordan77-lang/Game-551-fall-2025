<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Digital Twin — iOS Viewer</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22/>">
  <style>
    html,body{margin:0;height:100%;overflow:hidden;background:#000;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial}
    #msg{position:fixed;left:50%;top:12px;transform:translateX(-50%);background:#222;color:#fff;padding:6px 12px;border-radius:6px;z-index:10}
    #hint{position:fixed;left:50%;bottom:14px;transform:translateX(-50%);background:#fff3;color:#111;padding:8px 14px;border-radius:6px;z-index:10}
    #arButtonWrap{position:fixed;right:12px;top:12px;z-index:10}
    #reset{position:fixed;right:12px;bottom:12px;z-index:10}
    button{font:600 14px/1 system-ui;padding:.5rem .7rem;border-radius:.6rem;border:0;cursor:pointer}
    #ios-instructions{position:fixed;left:50%;top:60px;transform:translateX(-50%);background:#fff3;color:#111;padding:10px 18px;border-radius:8px;z-index:20;max-width:90vw;}
  </style>
</head>
<body>
  <div id="msg" role="status" aria-live="polite">Booting…</div>
  <div id="arButtonWrap" hidden><button id="arBtn">Enter AR</button></div>
  <div id="hint" hidden>Move to find a surface. Tap to place.</div>
  <button id="reset" hidden>Reset</button>
  <div id="ios-instructions">
    <strong>iOS Instructions:</strong><br>
    For best results, open this page in <b>Safari</b> on your iPhone or iPad.<br>
    If you see a camera permission prompt, allow access.<br>
    <br>
    <em>Note:</em> WebXR support on iOS is experimental. If AR does not work, try updating iOS or use desktop mode for 3D viewing.
  </div>
  <script type="importmap">
    { "imports": { "three": "./lib/three.module.js" } }
  </script>
  <script type="module">
    // The following is copied from the main digital twin viewer
    import * as THREE from 'three';
    import { GLTFLoader } from './lib/examples/jsm/loaders/GLTFLoader.js';
    import { OrbitControls } from './lib/examples/jsm/controls/OrbitControls.js';
    import { RoomEnvironment } from './lib/examples/jsm/environments/RoomEnvironment.js';
    // ...existing code from index.html...
    // For brevity, the full viewer code is reused here. You can further customize for iOS if needed.
  </script>
</body>
</html>
